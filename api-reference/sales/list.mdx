---
title: "Listar Vendas"
api: "GET /api/v1/sales"
description: "Lista todas as vendas cadastradas com paginação"
---

<Tip>
Retorna uma lista paginada de vendas com informações dos clientes e representadas associadas.
</Tip>

<Warning>
Você precisa de uma API key válida no header x-api-key para usar este endpoint.
</Warning>

## Headers

<ParamField header="x-api-key" type="string" required>
  API key de autenticação
</ParamField>

## Query Parameters

<ParamField query="page" type="number" default="1">
  Número da página para paginação
</ParamField>

<ParamField query="limit" type="number" default="20">
  Quantidade de registros por página (máximo: 100)
</ParamField>

<RequestExample>

```bash cURL
curl -X GET "https://api.sistema-representantes.com.br/api/v1/sales?page=1&limit=20" \
  -H "x-api-key: sua-api-key-aqui"
```

```bash Com Paginação
curl -X GET "https://api.sistema-representantes.com.br/api/v1/sales?page=2&limit=50" \
  -H "x-api-key: sua-api-key-aqui"
```

```javascript JavaScript
const response = await fetch('https://api.sistema-representantes.com.br/api/v1/sales?page=1&limit=20', {
  method: 'GET',
  headers: {
    'x-api-key': 'sua-api-key-aqui'
  }
});

const result = await response.json();
console.log(`Total de vendas: ${result.total}`);
console.log(`Vendas nesta página: ${result.data.length}`);

// Calcular valor total das vendas
const totalValue = result.data.reduce((sum, sale) => sum + sale.valor_total, 0);
console.log(`Valor total desta página: R$ ${totalValue.toFixed(2)}`);
```

```python Python
import requests

url = "https://api.sistema-representantes.com.br/api/v1/sales"
headers = {
    'x-api-key': 'sua-api-key-aqui'
}
params = {
    'page': 1,
    'limit': 20
}

response = requests.get(url, headers=headers, params=params)
result = response.json()

if response.status_code == 200:
    print(f"Total de vendas: {result['total']}")
    print(f"Página {result['page']} de {(result['total'] + result['limit'] - 1) // result['limit']}")
    
    for sale in result['data']:
        print(f"\nPedido: {sale['pedido']}")
        print(f"Cliente: {sale['cliente_nome']}")
        print(f"Valor: R$ {sale['valor_total']:.2f}")
        print(f"Status: {sale['status']}")
else:
    print(f"Erro: {result.get('error', 'Erro desconhecido')}")
```

```php PHP
<?php
$url = 'https://api.sistema-representantes.com.br/api/v1/sales';
$headers = [
    'x-api-key: sua-api-key-aqui'
];

$params = http_build_query([
    'page' => 1,
    'limit' => 20
]);

$options = [
    'http' => [
        'header' => implode("\r\n", $headers),
        'method' => 'GET'
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url . '?' . $params, false, $context);
$response = json_decode($result, true);

if ($response) {
    echo "Total de vendas: " . $response['total'] . "\n";
    echo "Mostrando página " . $response['page'] . "\n\n";
    
    foreach ($response['data'] as $sale) {
        echo "Pedido: " . $sale['pedido'] . "\n";
        echo "Cliente: " . $sale['cliente_nome'] . "\n";
        echo "Valor: R$ " . number_format($sale['valor_total'], 2, ',', '.') . "\n";
        echo "Status: " . $sale['status'] . "\n";
        echo "---\n";
    }
}
?>
```

</RequestExample>

## Response

<ResponseField name="data" type="array">
  Array contendo as vendas encontradas
  
  <Expandable title="Estrutura da venda">
    <ResponseField name="id" type="string">
      ID único da venda (UUID)
    </ResponseField>
    <ResponseField name="pedido" type="string">
      Código do pedido
    </ResponseField>
    <ResponseField name="data" type="string">
      Data da venda (formato: YYYY-MM-DD)
    </ResponseField>
    <ResponseField name="cliente_id" type="string">
      ID do cliente
    </ResponseField>
    <ResponseField name="cliente_nome" type="string">
      Nome do cliente (join automático)
    </ResponseField>
    <ResponseField name="representada_id" type="string">
      ID da representada
    </ResponseField>
    <ResponseField name="representada_nome" type="string">
      Nome da representada (join automático)
    </ResponseField>
    <ResponseField name="status" type="string">
      Status da venda:
      - `Pedido` - Venda registrada
      - `Faturado` - Nota fiscal emitida
      - `Enviado` - Mercadoria despachada
      - `Entregue` - Mercadoria recebida
      - `Cancelado` - Venda cancelada
    </ResponseField>
    <ResponseField name="valor_total" type="number">
      Valor total da venda em reais
    </ResponseField>
    <ResponseField name="created_at" type="string">
      Data de criação (ISO 8601)
    </ResponseField>
    <ResponseField name="updated_at" type="string">
      Data da última atualização
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="page" type="number">
  Página atual
</ResponseField>

<ResponseField name="limit" type="number">
  Limite de registros por página
</ResponseField>

<ResponseField name="total" type="number">
  Total de vendas no banco de dados
</ResponseField>

<ResponseExample>

```json 200 - Sucesso
{
  "data": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "pedido": "PED-2024-001",
      "data": "2024-01-20",
      "cliente_id": "550e8400-e29b-41d4-a716-446655440000",
      "cliente_nome": "Supermercado Central",
      "representada_id": "987e6543-e89b-12d3-a456-426614174999",
      "representada_nome": "Laticínios do Vale",
      "status": "Faturado",
      "valor_total": 5500.00,
      "created_at": "2024-01-20T10:30:00Z",
      "updated_at": "2024-01-21T08:15:00Z"
    },
    {
      "id": "456e7890-e89b-12d3-a456-426614174111",
      "pedido": "PED-2024-002",
      "data": "2024-01-21",
      "cliente_id": "660e8400-e29b-41d4-a716-446655440111",
      "cliente_nome": "Distribuidora ABC",
      "representada_id": "987e6543-e89b-12d3-a456-426614174999",
      "representada_nome": "Laticínios do Vale",
      "status": "Pedido",
      "valor_total": 3250.50,
      "created_at": "2024-01-21T14:20:00Z",
      "updated_at": "2024-01-21T14:20:00Z"
    }
  ],
  "page": 1,
  "limit": 20,
  "total": 85
}
```

```json 200 - Lista Vazia
{
  "data": [],
  "page": 1,
  "limit": 20,
  "total": 0
}
```

```json 401 - Não Autorizado
{
  "error": "API key ausente"
}
```

```json 401 - API Key Inválida
{
  "error": "API key inválida"
}
```

```json 403 - Empresa Inativa
{
  "error": "Empresa inativa"
}
```

</ResponseExample>

## Paginação

<Note>
Para navegar pelos resultados:
- Use `page` para especificar a página desejada
- O `limit` controla quantos registros por página (máximo 100)
- O campo `total` indica quantos registros existem no total

Exemplo para calcular total de páginas:
```javascript
const totalPages = Math.ceil(total / limit);
```
</Note>

## Informações Adicionais

<Info>
**Joins Automáticos:**
- O endpoint já retorna o nome do cliente (`cliente_nome`)
- O endpoint já retorna o nome da representada (`representada_nome`)
- Não é necessário fazer requisições adicionais para obter esses dados

**Ordenação:**
- As vendas são retornadas ordenadas por data de criação (mais recentes primeiro)
</Info>

## Status das Vendas

<Info>
Os possíveis status de uma venda são:

| Status | Descrição |
|--------|-----------|
| `Pedido` | Venda registrada, aguardando processamento |
| `Faturado` | Nota fiscal foi emitida |
| `Enviado` | Mercadoria foi despachada |
| `Entregue` | Cliente recebeu a mercadoria |
| `Cancelado` | Venda foi cancelada |
</Info>